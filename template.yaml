kind: Cluster
name: cyberhawk-talos-k8s-01
labels:
  template: true
  cni: none
  kubespan: true
kubernetes:
  version: v1.35.0
talos:
  version: v1.12.3
patches:
  - name: cni
    file: patches/cni.yml

features:
  enableWorkloadProxy: true

systemExtensions:
  - siderolabs/qemu-guest-agent
  - siderolabs/i915-ucode
  - siderolabs/intel-ucode
---
kind: ControlPlane
machineClass:
  name: role-controlplane
  size: 3
patches:
  - name: kubespan-enabled
    file: patches/kubespan.yml
  - name: install-cilium
    file: patches/install_cilium.yaml
  - name: install-argocd
    file: patches/install_argocd.yaml
  - name: bgp_configuration
    file: patches/bgp-config.yaml
  - name: nfs-csi-driver
    file: patches/install_nfs-csi-driver.yaml
  - name: extraManifests
    file: patches/extraManifests.yml
  - name: monitoring
    file: patches/monitoring.yaml
---
kind: Workers
machineClass:
  name: proxmox-auto-worker-blix
  size: 0
