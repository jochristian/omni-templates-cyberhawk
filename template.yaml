kind: Cluster
name: cyberhawk-talos-k8s
labels:
  template: true
  cni: none
  kubespan: enabled
kubernetes:
  version: v1.34.1
talos:
  version: v1.11.2
features:
  enableWorkloadProxy: true
patches:
  - name: zswap
    file: patches/zswap.yaml

systemExtensions:
  - siderolabs/qemu-guest-agent
  - siderolabs/i915-ucode
  - siderolabs/intel-ucode
---
kind: ControlPlane
machineClass:
  name: role-controlplane
  size: 3
patches:
  - name: kubespan-enabled
    file: patches/kubespan.yml
  - name: no-cni
    file: patches/cni.yml
  - name: install-cilium
    file: patches/install_cilium.yaml
  - name: install-argocd
    file: patches/install_argocd.yaml
  - name: bgp_configuration
    file: patches/bgp-config.yaml
  - name: nfs-csi-driver
    file: patches/install_nfs-csi-driver.yaml
  - name: extraManifests
    file: patches/extraManifests.yml
  - name: monitoring
    file: patches/monitoring.yaml
---
kind: Workers
